---
layout:     post
title:      å·ç§¯ç½‘ç»œåŸºæœ¬åŸç†
subtitle:   å·ç§¯ç½‘ç»œåŸºæœ¬åŸç†
date:       2017-10-05
author:     HR
header-img: img/post-bg-cnn.jpg
catalog: true
tags:
    - æ·±åº¦å­¦ä¹ 
    - ç¥ç»ç½‘ç»œ
    - CNN

---


### å·ç§¯ç½‘ç»œæ¦‚è¿° 

å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Network,CNNï¼‰æ˜¯ä¸€ç§å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå®ƒçš„äººå·¥ç¥ç»å…ƒå¯ä»¥å“åº”ä¸€éƒ¨åˆ†è¦†ç›–èŒƒå›´å†…çš„å‘¨å›´å•å…ƒï¼Œå¯¹äºå¤§å‹å›¾åƒå¤„ç†æœ‰å‡ºè‰²è¡¨ç°ã€‚å®ƒåŒ…æ‹¬å·ç§¯å±‚(alternating convolutional layer)å’Œæ± å±‚(pooling layer)ã€‚

 
### å·ç§¯ç½‘ç»œçš„ç»“æ„
![](img/post-bg-cnn.jpg)

  æœ€å·¦è¾¹ï¼š

æ˜¯æ•°æ®è¾“å…¥å±‚ï¼Œå¯¹æ•°æ®åšä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚å»å‡å€¼ï¼ˆæŠŠè¾“å…¥æ•°æ®å„ä¸ªç»´åº¦éƒ½ä¸­å¿ƒåŒ–ä¸º0ï¼Œé¿å…æ•°æ®è¿‡å¤šåå·®ï¼Œå½±å“è®­ç»ƒæ•ˆæœï¼‰ã€å½’ä¸€åŒ–ï¼ˆæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½å½’ä¸€åˆ°åŒæ ·çš„èŒƒå›´ï¼‰ã€PCA/ç™½åŒ–ç­‰ç­‰ã€‚CNNåªå¯¹è®­ç»ƒé›†åšâ€œå»å‡å€¼â€è¿™ä¸€æ­¥ã€‚

  ä¸­é—´æ˜¯ï¼š

CONVï¼šå·ç§¯è®¡ç®—å±‚ï¼Œçº¿æ€§ä¹˜ç§¯ æ±‚å’Œã€‚
RELUï¼šæ¿€åŠ±å±‚ï¼Œä¸Šæ–‡2.2èŠ‚ä¸­æœ‰æåˆ°ï¼šReLUæ˜¯æ¿€æ´»å‡½æ•°çš„ä¸€ç§ã€‚
POOLï¼šæ± åŒ–å±‚ï¼Œç®€è¨€ä¹‹ï¼Œå³å–åŒºåŸŸå¹³å‡æˆ–æœ€å¤§ã€‚
   
 æœ€å³è¾¹æ˜¯ï¼š

FCï¼šå…¨è¿æ¥å±‚
## CNNä¹‹å·ç§¯è®¡ç®—å±‚
### ä»€ä¹ˆæ˜¯å·ç§¯
é¦–å…ˆï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸‹ä»€ä¹ˆæ˜¯å·ç§¯æ“ä½œã€‚
    å¯¹å›¾åƒï¼ˆä¸åŒçš„æ•°æ®çª—å£æ•°æ®ï¼‰å’Œæ»¤æ³¢çŸ©é˜µï¼ˆä¸€ç»„å›ºå®šçš„æƒé‡ï¼šå› ä¸ºæ¯ä¸ªç¥ç»å…ƒçš„æƒé‡å›ºå®šï¼Œæ‰€ä»¥åˆå¯ä»¥çœ‹åšä¸€ä¸ªæ’å®šçš„æ»¤æ³¢å™¨filterï¼‰åšå†…ç§¯ï¼ˆé€ä¸ªå…ƒç´ ç›¸ä¹˜å†æ±‚å’Œï¼‰çš„æ“ä½œå°±æ˜¯æ‰€è°“çš„ã€å·ç§¯ã€æ“ä½œï¼Œä¹Ÿæ˜¯å·ç§¯ç¥ç»ç½‘ç»œçš„åå­—æ¥æºã€‚
    æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œå›¾ä¸­å·¦è¾¹éƒ¨åˆ†æ˜¯åŸå§‹è¾“å…¥æ•°æ®ï¼Œå›¾ä¸­ä¸­é—´éƒ¨åˆ†æ˜¯æ»¤æ³¢å™¨filterï¼Œå›¾ä¸­å³è¾¹æ˜¯è¾“å‡ºçš„æ–°çš„äºŒç»´æ•°æ®ã€‚
 ![](http://img.blog.csdn.net/20160702215705128)

### åŠ¨æ€å·ç§¯å›¾ 

![](https://cs231n.github.io/assets/conv-demo/index.html)

éšç€å·¦è¾¹æ•°æ®çª—å£çš„å¹³ç§»æ»‘åŠ¨ï¼Œæ»¤æ³¢å™¨Filter w0å¯¹ä¸åŒçš„å±€éƒ¨æ•°æ®è¿›è¡Œå·ç§¯è®¡ç®—ã€‚
    å€¼å¾—ä¸€æçš„æ˜¯ï¼š
å·¦è¾¹æ•°æ®åœ¨å˜åŒ–ï¼Œæ¯æ¬¡æ»¤æ³¢å™¨éƒ½æ˜¯é’ˆå¯¹æŸä¸€å±€éƒ¨çš„æ•°æ®çª—å£è¿›è¡Œå·ç§¯ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„CNNä¸­çš„å±€éƒ¨æ„ŸçŸ¥æœºåˆ¶ã€‚
ä¸æ­¤åŒæ—¶ï¼Œæ•°æ®çª—å£æ»‘åŠ¨ï¼Œä½†ä¸­é—´æ»¤æ³¢å™¨Filter w0çš„æƒé‡ï¼ˆå³æ¯ä¸ªç¥ç»å…ƒè¿æ¥æ•°æ®çª—å£çš„çš„æƒé‡ï¼‰æ˜¯å›ºå®šä¸å˜çš„ï¼Œè¿™ä¸ªæƒé‡ä¸å˜å³æ‰€è°“çš„CNNä¸­çš„å‚æ•°å…±äº«æœºåˆ¶ã€‚
    æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°ä¸Šé¢è¿™ä¸ªåŠ¨æ€å›¾çš„æ—¶å€™ï¼Œåªè§‰å¾—å¾ˆç‚«ï¼Œå¦å¤–å°±æ˜¯æ®è¯´â€œç›¸ä¹˜åæƒ³åŠ â€ï¼Œä½†åˆ°åº•å…·ä½“æ˜¯ä¸ªæ€ä¹ˆç›¸ä¹˜åæƒ³åŠ çš„è¿‡ç¨‹ åˆ™æ— æ³•ä¸€çœ¼çœ‹å‡ºï¼Œç½‘ä¸Šä¹Ÿæ²¡æœ‰ä¸€ç›®äº†ç„¶çš„è®¡ç®—è¿‡ç¨‹ã€‚æœ¬æ–‡æ¥ç»†ç©¶ä¸‹ã€‚
```

### å­—ç¬¦ä¸²æ”¹åŠ¨


### String æ“ä½œç®€åŒ–äº†

`String` è®¸å¤šè¦é€šè¿‡ `.characters` è¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥ç›´æ¥ç”¨ String è¿›è¡Œæ“ä½œäº†ã€‚

ä¾‹å¦‚ï¼š

```swift
let greeting = "Hello, ğŸ˜œ!"
// No need to drill down to .characters
let n = greeting.count
let endOfSentence = greeting.index(of: "!")!

```

### æ–°å¢ Substring ç±»å‹


swift 4 ä¸ºå­—ç¬¦ä¸²ç‰‡æ®µæ–°å¢äº†ä¸€ä¸ªå« `Substring` çš„ç±»å‹ã€‚

å½“ä½ åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„ç‰‡æ®µæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ª `Substring` å®ä¾‹ã€‚`Substring` ä¸ `String` ç”¨æ³•ç›¸åŒï¼Œ å› ä¸ºå­ä¸²å’ŒåŸå­—ç¬¦ä¸²å…±äº«å†…å­˜ï¼Œæ‰€ä»¥å¯¹å­ä¸²çš„æ“ä½œå¿«é€Ÿè€Œä¸”é«˜æ•ˆã€‚

```swift
let greeting = "Hi there! It's nice to meet you! ğŸ‘‹"
let endOfSentence = greeting.index(of: "!")! 

// äº§ç”Ÿ Substring å®ä¾‹
let firstSentence = greeting[...endOfSentence]
// firstSentence == "Hi there!"

// `Substring` ä¸ `String` ç”¨æ³•ç›¸åŒ
let shoutingSentence = firstSentence.uppercased()
// shoutingSentence == "HI THERE!" 
```

ä½†æ˜¯è¦æ³¨æ„ä¸€ä¸ª `Substring` ä¿ç•™ä»å…¶ç”Ÿæˆçš„å®Œæ•´çš„ `String`å€¼ã€‚ å½“æ‚¨ä¼ é€’ä¸€ä¸ªçœ‹ä¼¼å¾ˆå°çš„ `Substring` æ—¶ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„å¤–çš„é«˜å†…å­˜å¼€é”€ã€‚æ‰€ä»¥ä½¿ç”¨ `Substring`æ—¶ï¼Œæœ€å¥½è½¬åŒ–ä¸º `String`.

```swift
let newString = String(substring)
```


#### æ¢è¡Œå¯ä»¥ä¸ç”¨ `\n`äº†ï¼

Swift 3ï¼Œå­—ç¬¦ä¸²æ¢è¡Œè¦æ’å…¥ `\n`ã€‚
ä¾‹å¦‚ï¼š

![](https://ws4.sinaimg.cn/large/006tNc79gy1fjdam0wvhhj305d0283yf.jpg)

åœ¨ Swift 4 å¯ä»¥è¿™æ ·æ“ä½œ:

![](https://ws2.sinaimg.cn/large/006tNc79gy1fjdas2yri4j303q0260sm.jpg)

ç”¨ä¸¤ä¸ª `â€œâ€â€œ` åŒ…è£¹èµ·æ¥çš„å­—ç¬¦ä¸²ä¼šè‡ªåŠ¨æ·»åŠ  `\n` æ¢è¡Œï¼Œæ›´åŠ ç›´è§‚äº†ã€‚æ³¨æ„ï¼šæ¢è¡Œä¸ç¼©è¿›å‚ç…§çš„æ˜¯ç¬¬äºŒä¸ª `â€œâ€â€œ` å·çš„ä½ç½®ã€‚

å—¯ï¼Œæˆ‘è§‰å¾—OKï¼

#### æ”¯æŒ Unicode 9

Swift 4 æ”¯æŒ Unicode 9ï¼Œ[ä¸ºç°ä»£è¡¨æƒ…ç¬¦å·ä¿®æ­£äº†ä¸€äº›é—®é¢˜](https://oleb.net/blog/2016/12/emoji-4-0/)ã€‚


```swift
let family1 = "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"
let family2 = "ğŸ‘¨\u{200D}ğŸ‘©\u{200D}ğŸ‘§\u{200D}ğŸ‘¦"
family1 == family2 // â†’ true
```

å±…ç„¶è¿˜æœ‰è¿™ç§æ“ä½œ~

### æ–°å¢ KeyPath æ•°æ®ç±»å‹

KeyPath æ˜¯ Swift 4 æ–°å¢åŠ çš„æ•°æ®ç±»å‹ã€‚

å®šä¹‰ä¸¤ä¸ªç»“æ„ä½“ `Person`ä¸`Book` 

```swift
struct Person {
    var name: String
}

struct Book {
    var title: String
    var authors: [Person]
    var primaryAuthor: Person {
        return authors.first!
    }
}

let abelson = Person(name: "Harold Abelson")
let sussman = Person(name: "Gerald Jay Sussman")
let book = Book(title: "Structure and Interpretation of Computer Programs", authors: [abelson, sussman])
```
```swift
book[keyPath: \Book.title]
book[keyPath: \Book.primaryAuthor.name]
// ç›¸å½“ä¸
book.title
book.primaryAuthor.name
```

è¿™é‡Œ `\Book.title` ä¸ `\Book.primaryAuthor.name` å°±æ˜¯ KeyPath.

KeyPath å¯ä»¥ç”¨ `.appending` æ‹¼æ¥

```swift
let authorKeyPath = \Book.primaryAuthor
let nameKeyPath = authorKeyPath.appending(path: \.name)
// nameKeyPath = \Book.primaryAuthor.name
```

### æ–°å¢  `swapAt()` å‡½æ•°
Swift 4 å¼•å…¥äº†ä¸€ç§åœ¨é›†åˆä¸­äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„æ–°æ–¹æ³•: `swapAt()`

Swift 3 äº¤æ¢é›†åˆä¸­çš„å…ƒç´ çš„ç”¨ `swap()`

```swift
var numbers = [1,2,3,4,5]
swap(&numbers[0], &numbers[1])
// numbers = [2,1,3,4,5]
```

Swift 4 ä¸­å¯ä»¥ç›´æ¥ç”¨ 

```swift
var numbers = [1,2,3,4,5]
numbers.swapAt(0,1)
// numbers = [2,1,3,4,5]
```



### å…¶ä»–æ”¹åŠ¨

å…¶ä»–æ”¹åŠ¨å¦‚ï¼š**æ–°çš„æ•´æ•°åè®®**ã€**æ³›å‹ä¸‹æ ‡**ã€**NSNumber bridging**ç­‰

å¯ä»¥å‚è€ƒï¼š[whats new in swift4](https://github.com/ole/whats-new-in-swift-4)


